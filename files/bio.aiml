<?xml version="1.0" encoding="UTF-8"?>
<aiml version="2.0">
<!-- Question about children to start children topic -->
	<category>
	    <pattern>^ MY CHILDREN</pattern>
	    <template>
	        Oh. Do you have children?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE CHILDREN</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name='children'>yes</set></think>
	        <think><set name='topic'>CHILDREN</set></think>
	        Oh that's great. How many children do you have?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE CHILDREN</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="children">no</set></think>
	        It is ok. But are you married?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE CHILDREN</that>
        <pattern>*</pattern>
        <template>
            Sorry, I didn't understand you. Do you have children?    
        </template>
    </category>
    
    <!-- Question about grandchildren to start grandchildren topic -->
	<category>
	    <pattern>_ MY GRANDCHILDREN</pattern>
	    <template>
	        Oh. Do you have grandchildren?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE GRANDCHILDREN</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name="grandchildren">yes</set></think>
	        <think><set name='topic'>GRANDCHILDREN</set></think>
	        Oh that's great. How many grandchildren do you have?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE GRANDCHILDREN</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="grandchildren">no</set></think>
	        It is ok. But are you married?
	    </template>
    </category>
    
    <category>
        <that>DO YOU HAVE GRANDCHILDREN</that>
        <pattern>*</pattern>
        <template>
            Sorry, I didn't understand you. Do you have grandchildren?    
        </template>
    </category>
    
    <category>
        <that>BUT ARE YOU MARRIED</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name="married">yes</set></think>
	        <think><set name='topic'>MARRIED</set></think>
	        <!-- Empezar topic: busca preguntas sobre como se llama su mujer, 
	        cuantos años han estado casados y así -->
	        Congratulations. I would like to be married. What is the name of your partner?
	    </template>
    </category>
    
    <category>
        <that>BUT ARE YOU MARRIED</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="married">no</set></think>
	        <!-- Empezar topic: busca preguntas sobre como se llama su mujer, 
	        cuantos años han estado casados y así -->
	        So, I understand you are single. Do you have any friend or someone who supports you on your daily life?
	        
	        <!-- Seguir con el topic de dependencia y apoyo de alguien -->
	    </template>
    </category>
    
    
    <topic name='CHILDREN'>
    	<category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE <set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>_ GOT <set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star index='2'/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern><set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE *</pattern>
    	    <template>
    	        I didn't understand, can you put in numbers?
    	    </template>
        </category>
    
        
        <category>
    	    <that>WHAT IS THE NAME OF YOUR *</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='children'><star/></set><set name='topic'></set></think>
    	        I would like to know <get name='children'/>!
    	    </template>
        </category>
        
        <category>
    	    <that>WHAT ARE THE NAMES OF YOUR *</that>
    	    <pattern>* AND *</pattern>
    	    <template>
    	        <think><set name='childreng'><star/> <star index='2'/></set></think>
    	         I would like to know them. Which is your favorite?
    	            <learn>
    	                <category>
    	                    <pattern>* DO NOT HAVE *</pattern>
    	                    <template>
    	                       <think><set name='fav_children'>0</set><set name='topic'></set></think>
    	                       Well that's ok too. 
    	                    </template>
	                    </category>
	                    
	                    <category>
	                        <pattern>* IS MY FAVORITE</pattern>
	                        <template>
    	                       <think><set name='fav_child'><star/></set><set name='topic'></set></think>
    	                       Ha ha ha. I am my mothers' favourite too. How old are they?
	                        </template>
                        </category>
                        
                        <category>
	                        <pattern>* ARE MY FAVORITE</pattern>
	                        <template><srai>* IS MY FAVOURITE</srai>
	                        </template>
                        </category>
                        
                        <category>
                    	    <pattern>MY FAVORITE IS *</pattern>
                    	    <template><srai>* IS MY FAVOURITE</srai>
                    	    </template>
                        </category>
                        
                        <category>
                            <pattern>*</pattern>
                            <template>Sorry, which is your favorite?</template>
                        </category>
    	            </learn>
    	    </template>
        </category>
        
        <category>
            <that>HOW OLD ARE THEY</that>
            <pattern>*</pattern>
            <template>So, does any of them live at walking distance from you?</template>
        </category>
        
        <category>
            <that>DOES ANY OF THEM LIVE AT WALKING DISTANCE FROM YOU</that>
            <pattern>*</pattern>
            <template>
    	           <think><set name='ans1'><star/></set></think>
    	           <condition name='ans1'>
    	               <li value='yes'>Oh that's great!</li>
    	               <li value='no'>That's ok you can see them any time.</li>
    	               <li>Sorry I didn't understand you. Does any of them live at walking distance from you?</li>
    	           </condition>
    	           That's great!
            </template>
        </category>
        
        <category>
            <pattern>*</pattern>
            <template>Sorry I didn't understand you. How many children do you have?</template>
        </category>
        
    </topic>
    
    <category>
            <that>HOW OLD ARE THEY</that>
            <pattern>*</pattern>
            <template>So, does any of them live at walking distance from you?</template>
        </category>
    
    <category>
            <that>SO, DOES ANY OF THEM LIVE AT WALKING DISTANCE FROM YOU</that>
            <pattern>*</pattern>
            <template>
    	           <think><set name='ans1'><star/></set></think>
    	           <condition name='ans1'>
    	               <li value='yes'>Oh that's great!</li>
    	               <li value='no'>That's ok you can see them any time.</li>
    	               <li>Sorry I didn't understand you. Does any of them live at walking distance from you?</li>
    	           </condition>
            </template>
        </category>
    
     <topic name='GRANDCHILDREN'>
    	    	<category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE <set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>_ GOT <set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star index='2'/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern><set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE *</pattern>
    	    <template>
    	        I didn't understand, can you put in numbers?
    	    </template>
        </category>
    
        
        <category>
    	    <that>WHAT IS THE NAME OF YOUR *</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='grandchildren'><star/></set><set name='topic'></set></think>
    	        I would like to know <get name='grandchildren'/>!
    	    </template>
        </category>
        
        <category>
    	    <that>WHAT ARE THE NAMES OF YOUR *</that>
    	    <pattern>* AND *</pattern>
    	    <template>
    	        <think><set name='grandchildreng'><star/> <star index='2'/></set></think>
    	         I would like to know them. Which is your favorite?
    	            <learn>
    	                <category>
    	                    <pattern>* DO NOT HAVE *</pattern>
    	                    <template>
    	                       <think><set name='fav_grandchildren'>0</set></think>
    	                       Well that's ok too. How old are they?
    	                    </template>
	                    </category>
	                    
	                    <category>
	                        <pattern>* IS MY FAVORITE</pattern>
	                        <template>
    	                       <think><set name='fav_grandchild'><star/></set></think>
    	                       Ha ha ha. I am my grandmothers' favorite too. How old are they?
	                        </template>
                        </category>
                        
                        <category>
	                        <pattern>* ARE MY FAVORITE</pattern>
	                        <template><srai>* IS MY FAVOURITE</srai>
	                        </template>
                        </category>
                        
                        <category>
                    	    <pattern>MY FAVORITE IS *</pattern>
                    	    <template><srai>* IS MY FAVOURITE</srai>
                    	    </template>
                        </category>
                        
                        <category>
                            <pattern>*</pattern>
                            <template>Sorry, which is your favorite?</template>
                        </category>
    	            </learn>
    	    </template>
        </category>
        
        
        <category>
            <pattern>*</pattern>
            <template>Sorry I didn't understand you. How many grandchildren do you have?</template>
        </category>
        
        
    </topic>
    
    <topic name='MARRIED'>
    	
    	<category>
    	    <that>WHAT IS THE NAME OF YOUR PARTNER</that>
    	    <pattern>^ IS *</pattern>
    	    <template>
    	        <think><set name='partner'><star index='2'/></set></think>
    	        I'd love to know <get name='partner'/>. How long are you married?
    	        
    	    </template>
	    </category>
	    
	    <category>
    	    <that>WHAT IS THE NAME OF YOUR PARTNER</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='partner'><star/></set></think>
    	        I'd love to know <get name='partner'/>. How long are you married?
    	        
    	    </template>
	    </category>
	    
	    <category>
	        <that>HOW LONG ARE YOU MARRIED</that>
	        <pattern><set>number</set> *</pattern>
	        <template>
	            Wow, <input/> is great.
	            <think><set name='topic'></set></think>
	        </template>
        </category>
    	
    </topic>