<?xml version="1.0" encoding="UTF-8"?>
<aiml version="2.0">
<!-- Question about children to start children topic -->
	<category>
	    <pattern>^ MY CHILDREN</pattern>
	    <template>
	        Oh. Do you have children? (Indicate Yes or No)
	    </template>
    </category>
    
    <category>
        <that>LPAREN INDICATE YES OR NO RPAREN</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name='children'>yes</set></think>
	        <think><set name='topic'>CHILDREN</set></think>
	        Oh that's great. How many children do you have?
	    </template>
    </category>
    
    <category>
        <that>LPAREN INDICATE YES OR NO RPAREN</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="children">no</set></think>
	        It is ok. But are you married?
	    </template>
    </category>
    
    <category>
        <that>LPAREN INDICATE YES OR NO RPAREN</that>
        <pattern>*</pattern>
        <template>
            Sorry, I didn't understand you. Did you say Yes?    
        </template>
    </category>
    
    <!-- Question about grandchildren to start grandchildren topic -->
	<category>
	    <pattern>^ MY GRANDCHILDREN</pattern>
	    <template>
	        Oh. Do you have grandchildren? (If you have it say Yes, if not say No)
	    </template>
    </category>
    
    <category>
        <that>LPAREN IF YOU HAVE IT SAY YES, IF NOT SAY NO RPAREN</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name="grandchildren">yes</set></think>
	        <think><set name='topic'>GRANDCHILDREN</set></think>
	        Oh that's great. How many grandchildren do you have?
	    </template>
    </category>
    
    <category>
        <that>LPAREN IF YOU HAVE IT SAY YES, IF NOT SAY NO RPAREN</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="grandchildren">no</set></think>
	        It is ok. But are you married?
	    </template>
    </category>
    
    <category>
        <that>LPAREN IF YOU HAVE IT SAY YES, IF NOT SAY NO RPAREN</that>
        <pattern>*</pattern>
        <template>
            Sorry, I didn't understand you. Do you have grandchildren?    
        </template>
    </category>
    
    <category>
        <that>BUT ARE YOU MARRIED</that>
	    <pattern>YES ^</pattern>
	    <template>
	        <think><set name="married">yes</set></think>
	        <think><set name='topic'>MARRIED</set></think>
	        <!-- Empezar topic: busca preguntas sobre como se llama su mujer, 
	        cuantos aÃ±os han estado casados y asÃ­ -->
	        Congratulations. I would like to be married. What is the name of your partner?
	    </template>
    </category>
    
    <category>
        <that>BUT ARE YOU MARRIED</that>
	    <pattern>NO ^</pattern>
	    <template>
	        <think><set name="married">no</set></think>
	        <!-- Empezar topic: busca preguntas sobre como se llama su mujer, 
	        cuantos aÃ±os han estado casados y asÃ­ -->
	        And do you have anyone who supports you on your daily life?
	    </template>
    </category>
    
    <category>
        <that>AND DO YOU HAVE ANYONE WHO SUPPORTS YOU ON YOUR DAILY LIFE</that>
	    <pattern>*</pattern>
	    <template>
	        <think><set name='ans1'><star/></set></think>
    	           <condition name='ans1'>
    	               <li value='yes'><think><set name='topic'>SUPPORT</set></think>Which is the name of this person?</li>
    	               <li value='no'>It is good to be independent.</li>
    	               <li>Sorry I didn't understand you.</li>
    	           </condition>
	    </template>
    </category>
    
    
    <topic name='CHILDREN'>
    	<category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE <set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>* GOT <set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star index='2'/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern><set>number</set></pattern>
    	    <template>
    	        <think><set name='nchild'><star/></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE *</pattern>
    	    <template>
    	        <think><set name='nchild'><map name="stringnum"><star/></map></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY CHILDREN DO YOU HAVE</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='nchild'><map name="stringnum"><star/></map></set></think>
    	        <condition name='nchild'>
    	            <li value='1'>What is the name of your child?</li>
    	            <li value='one'>What is the name of your child?</li>
    	            <li>Wow. What are the names of your children?</li>
    	        </condition>
    	    </template>
        </category>
    
        <category>
    	    <that>WHAT IS THE NAME OF YOUR *</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='children'><star/></set></think>
    	        I would like to know <get name='children'/>!
    	    </template>
        </category>
        
        <category>
    	    <that>WHAT ARE THE NAMES OF YOUR *</that>
    	    <pattern>* AND *</pattern>
    	    <template>
    	        <think><set name='childreng'><star/> <star index='2'/></set></think>
    	         I would like to know them. Which is your favorite?
     	    </template>
        </category>
        
        <category>
            <pattern>* DO NOT HAVE *</pattern>
            <template>
               <think><set name='fav_children'>0</set></think>
               Yes, it is difficult to choose. How old is the oldest?
            </template>
        </category>
        
        <category>
            <pattern>* IS MY FAVORITE</pattern>
            <template>
               <think><set name='fav_child'><star/></set></think>
               Ha ha ha. I am my mothers' favourite too. How old is the oldest?
            </template>
        </category>
        
        <category>
            <pattern>* ARE MY FAVORITE</pattern>
            <template><srai>* IS MY FAVOURITE</srai>
            </template>
        </category>
        
        <category>
    	    <pattern>MY FAVORITE IS *</pattern>
    	    <template><srai>* IS MY FAVOURITE</srai>
    	    </template>
        </category>
        
        <category>
            <pattern>*</pattern>
            <template>
                <think><set name='fav_child'><star/></set></think>
                Ha ha ha. I am my mothers' favourite too. How old is the oldest?
            </template>
        </category>
        
        <category>
            <that>HOW OLD IS THE OLDEST</that>
            <pattern>*</pattern>
            <template>It is a good age. So, does any of them live at walking distance from you?</template>
        </category>
        
        <category>
            <that>SO, DOES ANY OF THEM LIVE AT WALKING DISTANCE FROM YOU</that>
            <pattern>*</pattern>
            <template>
    	           <think><set name='ans1'><star/></set></think>
    	           <condition name='ans1'>
    	               <li value='yes'>Who?</li>
    	               <li value='no'>That's ok you can see them any time.</li>
    	               <li>Sorry I didn't understand you. Does any of them live at walking distance from you?</li>
    	           </condition>
            </template>
        </category>
        
        <category>
            <that>WHO</that>
            <pattern>*</pattern>
            <template>
                <think><set name='close_children'><star/></set></think>
                It is nice to have family close to you
            </template>
        </category>
        
    </topic>
    
    
     <topic name='GRANDCHILDREN'>
	    <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE <set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>_ GOT <set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star index='2'/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern><set>number</set></pattern>
    	    <template>
    	        <think><set name='ngrandchild'><star/></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>I HAVE *</pattern>
    	    <template>
    	        <think><set name='ngrandchild'><map name="stringnum"><star/></map></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
        
        <category>
    	    <that>HOW MANY GRANDCHILDREN DO YOU HAVE</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='ngrandchild'><map name="stringnum"><star/></map></set></think>
    	        <condition name='ngrandchild'>
    	            <li value='1'>What is the name of your grandchild?</li>
    	            <li value='one'>What is the name of your grandchild?</li>
    	            <li>Wow. What are the names of your grandchildren?</li>
    	        </condition>
    	    </template>
        </category>
    
        <category>
    	    <that>WHAT IS THE NAME OF YOUR *</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='grandchildren'><star/></set><set name='topic'></set></think>
    	        I would like to know <get name='grandchildren'/>!
    	    </template>
        </category>
        
        <category>
    	    <that>WHAT ARE THE NAMES OF YOUR *</that>
    	    <pattern>* AND *</pattern>
    	    <template>
    	        <think><set name='grandchildreng'><star/> <star index='2'/></set></think>
    	         I would like to know them. Which is your favorite?
    	   </template>
	    </category>
	    
	    <category>
            <pattern>* DO NOT HAVE *</pattern>
            <template>
               <think><set name='fav_grandchildren'>0</set></think>
               Yes, it is difficult to choose. How old is the oldest?
            </template>
        </category>
	    
	    <category>
            <pattern>* IS MY FAVORITE</pattern>
            <template>
               <think><set name='fav_grandchild'><star/></set></think>
               Ha ha ha. I am my mothers' favourite too. How old is the oldest?
            </template>
        </category>
        
        <category>
            <pattern>* ARE MY FAVORITE</pattern>
            <template><srai>* IS MY FAVOURITE</srai>
            </template>
        </category>
        
        <category>
    	    <pattern>MY FAVORITE IS *</pattern>
    	    <template><srai>* IS MY FAVOURITE</srai>
    	    </template>
        </category>
        
        <category>
            <pattern>*</pattern>
            <template>
                <think><set name='fav_grandchild'><star/></set></think>
                Ha ha ha. I am my mothers' favourite too. How old is the oldest?
            </template>
        </category>
        
        <category>
            <that>HOW OLD IS THE OLDEST</that>
            <pattern>*</pattern>
            <template>So, does any of them live at walking distance from you?</template>
        </category>
        
        <category>
            <that>SO, DOES ANY OF THEM LIVE AT WALKING DISTANCE FROM YOU</that>
            <pattern>*</pattern>
            <template>
    	           <think><set name='ans1'><star/></set></think>
    	           <condition name='ans1'>
    	               <li value='yes'>Who?</li>
    	               <li value='no'>That's ok you can see them any time.</li>
    	               <li>Sorry I didn't understand you. Does any of them live at walking distance from you?</li>
    	           </condition>
            </template>
        </category>
        
        <category>
            <that>WHO</that>
            <pattern>*</pattern>
            <template>
                <think><set name='close_grandchildren'><star/></set></think>
                It is nice you have it so close. I love being with my family too
            </template>
        </category>
    </topic>
    
    
    <topic name='MARRIED'>
    	
    	<category>
    	    <that>WHAT IS THE NAME OF YOUR PARTNER</that>
    	    <pattern>^ IS *</pattern>
    	    <template>
    	        <think><set name='partner'><star index='2'/></set></think>
    	        I'd love to know <get name='partner'/>. How many years have you been married?
    	    </template>
	    </category>
	    
	    <category>
    	    <that>WHAT IS THE NAME OF YOUR PARTNER</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='partner'><star/></set></think>
    	        I'd love to know <get name='partner'/>. How many years have you been married?
    	        
    	    </template>
	    </category>
	    
	    <category>
	        <that>HOW MANY YEARS HAVE YOU BEEN MARRIED</that>
	        <pattern>*</pattern>
	        <template>
	            Wow, <star/> is a lot of time. This must be true love!
	        </template>
        </category>
    	
    </topic>
    
    <topic name='SUPPORT'>
    	
    	<category>
    	    <that>WHICH IS THE NAME OF THIS PERSON</that>
    	    <pattern>^ IS *</pattern>
    	    <template>
    	        <think><set name='supporter'><star index='2'/></set></think>
    	        <get name='supporter'/> is a pretty name. Are you family?
    	    </template>
	    </category>
	    
	    <category>
    	    <that>WHICH IS THE NAME OF THIS PERSON</that>
    	    <pattern>*</pattern>
    	    <template>
    	        <think><set name='supporter'><star/></set></think>
    	        <get name='supporter'/> is a pretty name. Are you family?
    	    </template>
	    </category>
	    
	    <category>
	        <that>ARE YOU FAMILY</that>
	        <pattern>yes</pattern>
	        <template>
	            Does <get name='supporter'/> live close to you?
	        </template>
        </category>
        
        <category>
	        <that>ARE YOU FAMILY</that>
	        <pattern>no</pattern>
	        <template>
	            Does <get name='supporter'/> live close to you?
	        </template>
        </category>
        
        <category>
	        <that>DOES * LIVE CLOSE TO YOU</that>
	        <pattern>YES _</pattern>
	        <template>
	            <think><set name ='support_is_close'>yes</set></think>
	            Then it is easier that you receive the appropriate support you  need
	        </template>
        </category>
        
        <category>
	        <that>DOES * LIVE CLOSE TO YOU</that>
	        <pattern>NO _</pattern>
	        <template>
	            <think><set name ='support_is_close'>no</set></think>
	            It is ok because you have the phone and in case of emergy you can even call your children
	        </template>
        </category>
    	
    </topic>
    
    
</aiml>

